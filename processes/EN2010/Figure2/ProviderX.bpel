<!-- P BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Mon May 16 09:08:35 CEST 2011 -->
<bpel:process name="P"
         targetNamespace="http://www.example.com/matching/EDOC/Figure2/ProviderX"
         suppressJoinFailure="yes"
         xmlns:tns="http://www.example.com/figure4"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns2="http://www.example.com/matching/EDOC/Figure2/partner/interface"
         >
         
    <bpel:import namespace="http://www.example.com/matching/EDOC/Figure2/partner/interface" location="partner.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>

    <bpel:partnerLinks>
        <bpel:partnerLink name="partner" partnerLinkType="ns2:partnerPLT" partnerRole="partner"></bpel:partnerLink>
	</bpel:partnerLinks>

    <!-- ================================================================= -->         
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->         
    <bpel:variables>
        <bpel:variable name="processRequest" messageType="ns1:ReceiveOrderRequest"></bpel:variable>
        <bpel:variable name="processRequest1" messageType="ns1:ReceivePaymentRequestRequest"></bpel:variable>
        <bpel:variable name="partnerRequest" messageType="ns2:PrepareOrderRequest"></bpel:variable>
        <bpel:variable name="partnerRequest1" messageType="ns2:AssembleWatertankRequest"></bpel:variable>
        <bpel:variable name="partnerRequest2" messageType="ns2:ProduceWatertankBodyRequest"></bpel:variable>
        <bpel:variable name="partnerRequest3" messageType="ns2:AssembleMotorpumpRequest"></bpel:variable>
        <bpel:variable name="partnerRequest4" messageType="ns2:ProduceMotorRequest"></bpel:variable>
        <bpel:variable name="partnerRequest5" messageType="ns2:ProducePumpRequest"></bpel:variable>
        <bpel:variable name="partnerRequest6" messageType="ns2:checkGSMRequest"></bpel:variable>
        <bpel:variable name="partnerRequest7" messageType="ns2:getGSMRequest"></bpel:variable>
        <bpel:variable name="partnerRequest8" messageType="ns2:wrapUpParcelRequest"></bpel:variable>
        <bpel:variable name="partnerRequest9" messageType="ns2:scheduleRouteRequest"></bpel:variable>
        <bpel:variable name="partnerRequest10" messageType="ns2:deliverRegularRequest"></bpel:variable>
        <bpel:variable name="partnerRequest11" messageType="ns2:deliverExpressRequest"></bpel:variable>
        <bpel:variable name="partnerRequest12" messageType="ns2:handOverParcelRequest"></bpel:variable>
    </bpel:variables>
	<bpel:sequence name="main">
		
		
        <bpel:invoke name="gG" partnerLink="partner" operation="getGSM" inputVariable="partnerRequest7" portType="ns2:partner"></bpel:invoke>
        <bpel:invoke name="wP" partnerLink="partner" operation="wrapUpParcel" portType="ns2:partner" inputVariable="partnerRequest8"></bpel:invoke>
        <bpel:sequence name="Sequence">
            <bpel:invoke name="sR" partnerLink="partner" operation="scheduleRoute" portType="ns2:partner" inputVariable="partnerRequest9"></bpel:invoke>
            <bpel:if name="If">
                <bpel:invoke name="dR" partnerLink="partner" operation="deliverRegular" portType="ns2:partner" inputVariable="partnerRequest10"></bpel:invoke>
                <bpel:else>
                    <bpel:invoke name="dE" partnerLink="partner" operation="deliverExpress" portType="ns2:partner" inputVariable="partnerRequest11"></bpel:invoke>
                </bpel:else>
            </bpel:if>
            <bpel:invoke name="hP" partnerLink="partner" operation="handOverParcel" portType="ns2:partner" inputVariable="partnerRequest12"></bpel:invoke>
        </bpel:sequence>
    </bpel:sequence>    
</bpel:process>

