<!-- test BPEL Process [Generated by the Eclipse BPEL Designer]  -->
<!-- Date: Thu Apr 28 13:42:34 CEST 2011 -->

<bpel:process name="p1"
         targetNamespace="ns"
         suppressJoinFailure="yes"
         xmlns:tns="tns"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns1="http://www.example.org/matching/process/interface" xmlns:ns2="http://www.example.org/matching/partner/interface">
    <!-- Import the client WSDL -->
    <bpel:import namespace="http://www.example.org/matching/process/interface" location="process.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://www.example.org/matching/partner/interface" location="partner.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
	        
    <!-- ================================================================= -->         
    <!-- PARTNERLINKS                                                      -->
    <!-- List of services participating in this BPEL process               -->
    <!-- ================================================================= -->
    
    <bpel:partnerLinks>
        <bpel:partnerLink name="process" partnerLinkType="ns1:processPLT" myRole="process"></bpel:partnerLink>
        <bpel:partnerLink name="partner" partnerLinkType="ns2:partnerPLT" partnerRole="partner"></bpel:partnerLink>
    </bpel:partnerLinks>
    
    <!-- ================================================================= -->         
    <!-- VARIABLES                                                         -->
    <!-- List of messages and XML documents used within this BPEL process  -->
    <!-- ================================================================= -->         
    
    <bpel:variables>
        <!-- Reference to the message passed as input during initiation -->
        <bpel:variable name="input"
                  messageType="tns:testRequestMessage"/>
                  
        <!-- Reference to the message that will be sent back to the 
             requester during callback
             -->
        <bpel:variable name="output"
                  messageType="tns:testResponseMessage"/>
        <bpel:variable name="partnerRequest" messageType="ns2:InitiateShippingProductionSchedulingRequest"></bpel:variable>
    </bpel:variables>

        <bpel:flow name="Flow">
        	<bpel:links>
                <bpel:link name="link1"></bpel:link>
            </bpel:links>
        	<bpel:sequence name="Sequence1">
                
                <bpel:invoke name="InitiateShippingProductionScheduling" partnerLink="partner" operation="InitiateShippingProductionScheduling" inputVariable="partnerRequest"></bpel:invoke>
                <bpel:invoke name="SendShippingSchedule" partnerLink="partner" operation="SendShippingSchedule">
                    <bpel:targets>
                        <bpel:target linkName="link1"></bpel:target>
                    </bpel:targets>
                </bpel:invoke>
            </bpel:sequence>
            <bpel:sequence name="Sequence2">
                <bpel:invoke name="InvokeRequestShipping" partnerLink="partner" operation="InvokeRequestShipping"></bpel:invoke>
                <bpel:receive name="ReceiveShippingSchedule" partnerLink="process" operation="ReceiveShippingSchedule" portType="ns1:process">
                    <bpel:sources>
                        <bpel:source linkName="link1"></bpel:source>
                    </bpel:sources>
                </bpel:receive>
                
            </bpel:sequence>
        </bpel:flow>
</bpel:process>

