<!-- allInOne BPEL Process [Generated by the Eclipse BPEL Designer] -->
<!-- Date: Fri Sep 30 14:54:42 CEST 2011 -->
<bpel:process name="allInOne"
         targetNamespace="http://www.example.com/matching/"
         suppressJoinFailure="yes"
         xmlns:tns="http://www.example.com/matching/"
         xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:choice="http://www.example.org/matching/choiceP/" xmlns:inv="http://www.example.org/matching/invokableP/" xmlns:obs="http://www.example.org/matching/observableP/">

	<bpel:extensions>
		<bpel:extension namespace="http://www.cs.helsinki.fi/u/anorta/research/eSourcing/" mustUnderstand="yes" />
	</bpel:extensions>

    <bpel:import namespace="http://www.example.org/matching/choiceP/" location="choiceP.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://www.example.org/matching/invokableP/" location="invokableP.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>
    <bpel:import namespace="http://www.example.org/matching/observableP/" location="observableP.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"></bpel:import>

    <!-- ================================================================= -->
    <!-- ORCHESTRATION LOGIC                                               -->
    <!-- Set of activities coordinating the flow of messages across the    -->
    <!-- services integrated within this business process                  -->
    <!-- ================================================================= -->
    <bpel:partnerLinks>
        <bpel:partnerLink name="choicePL" partnerLinkType="choice:choicePLT" myRole="process"></bpel:partnerLink>
        <bpel:partnerLink name="invokablePL" partnerLinkType="inv:invokablePLT" myRole="process"></bpel:partnerLink>
        <bpel:partnerLink name="observablePL" partnerLinkType="obs:observablePLT" myRole="process"></bpel:partnerLink>
    </bpel:partnerLinks>
    <bpel:variables>
        <bpel:variable name="choicePLRequest" messageType="choice:choice1Request"></bpel:variable>
        <bpel:variable name="observablePLRequest" messageType="obs:op1Request"></bpel:variable>
        <bpel:variable name="choicePLRequest1" messageType="choice:choice2Request"></bpel:variable>
        <bpel:variable name="invokablePLRequest" messageType="inv:op1Request"></bpel:variable>
    </bpel:variables>
    <bpel:sequence name="main">
        <bpel:pick name="Pick" xmlns:m="http://www.cs.helsinki.fi/u/anorta/research/eSourcing/" m:status="EXOR">
            <bpel:onMessage partnerLink="choicePL" operation="choice1" variable="choicePLRequest">
                <bpel:empty name="Empty"></bpel:empty>
            </bpel:onMessage>
            <bpel:onMessage partnerLink="choicePL" operation="choice2" portType="choice:choiceP" variable="choicePLRequest1">
                <bpel:empty name="Empty1"></bpel:empty>
            </bpel:onMessage>
        </bpel:pick>
        <bpel:receive name="ObsReceive" partnerLink="observablePL" operation="op1" portType="obs:observableP" xmlns:m="http://www.cs.helsinki.fi/u/anorta/research/eSourcing/" m:status="observable"></bpel:receive>
        <bpel:receive name="InvReceive" partnerLink="invokablePL" operation="op1" portType="inv:invokableP" xmlns:m="http://www.cs.helsinki.fi/u/anorta/research/eSourcing/" m:status="invokable"></bpel:receive>
	</bpel:sequence>
</bpel:process>

